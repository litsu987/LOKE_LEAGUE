<!DOCTYPE html>
<html>

<head>
    <title>EmulatorJS Demo</title>
    <link rel=icon href=docs/favicon.ico sizes="16x16 32x32 48x48 64x64" type=image/vnd.microsoft.icon>
    <meta name=viewport content="width = device-width, initial-scale = 1">
    <style>

    </style>
</head>

<body>
    <div id="top">
        <h1>EmulatorJS Demo</h1>
        <img src="docs/Logo-light.png" alt="Logo" class="logo">
    </div>
    <div id="box">
        <!-- No hay necesidad de mostrar el botón ahora -->
        <!-- Drag ROM file or click here -->
    </div>

    <script>
        let enableDebug = false;
        let enableThreads = false;
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        if (urlParams.get('debug') == 1) {
            enableDebug = true;
            console.log("Debug is enabled");
        } else {
            console.log("Debug is disabled");
        }

        if (urlParams.get('threads') == 1) {
            if (window.SharedArrayBuffer) {
                enableThreads = true;
                console.log("Threads are enabled");
            } else {
                console.warn("Threads are disabled as SharedArrayBuffer is not available. Threads requires two headers to be set when sending you html page. See https://stackoverflow.com/a/68630724");
                console.log("Threads are disabled");
            }
        } else {
            console.log("Threads are disabled");
        }

        // Función para cargar automáticamente el juego al cargar la página
        async function loadGameAutomatically() {
            const url = "platino.nds"; // Ruta del juego a cargar automáticamente
            const core = "nds"; // Tipo de core para Nintendo DS

            const div = document.createElement("div");
            const sub = document.createElement("div");
            const script = document.createElement("script");

            sub.id = "game";
            div.id = "display";

            const top = document.getElementById("top");
            top.remove();
            const box = document.getElementById("box");
            box.remove();
            div.appendChild(sub);
            document.body.appendChild(div);

            window.EJS_player = "#game";
            window.EJS_gameName = "platino"; // Nombre del juego
            window.EJS_biosUrl = "";
            window.EJS_gameUrl = url;
            window.EJS_core = core;
            window.EJS_pathtodata = "data/";
            window.EJS_startOnLoaded = true;
            window.EJS_DEBUG_XX = enableDebug;
            window.EJS_disableDatabases = true;
            window.EJS_threads = enableThreads;

            script.src = "data/loader.js";
            document.body.appendChild(script);
        }

        // Llama a la función para cargar el juego automáticamente cuando se cargue la página
        loadGameAutomatically();
    </script>
</body>

</html>
